<div class="container-fluid">
    <div class="header">
        <div class="float-start align-row-center height-100 section-header">
            @if(isMyProfile()){
                <span [class]="model?.privacy ? Icons.NG_LOCK: Icons.NG_LOCK_OPEN" class="me-1 light-grey"></span>
            }
            {{ model?.username }}
            <span [class]="Icons.NG_ANGLE_DOWN" class="ms-1" style="font-size: 0.9rem;"></span>
        </div>
        <div class="float-end actions align-row-center" routerLink="/profile/{{ userId }}/settings">
            @if(isMyProfile()){
                <fa-icon [icon]="Icons.BARS"/>
            }
            @else {
                 <span [class]="Icons.NG_ELLIPSIS" style="font-size: 1.2rem;"></span>
            }
        </div>
    </div>

    @if(loading && !model){
        <div class="mt-3">
            <div class="d-row justify-content-between align-items-center">
                <p-skeleton styleClass="profile-photo" width="100px" height="100px"/>
                <div class="d-row justify-content-between align-items-center flex-1 mx-4">
                    <div class="d-column align-items-center">
                        <p-skeleton width="1rem" height="1.5rem"/>
                        <p-skeleton styleClass="mt-1" width="3rem" height="1.5rem"/>
                    </div>
                    <div class="d-column align-items-center">
                        <p-skeleton width="1rem" height="1.5rem"/>
                        <p-skeleton styleClass="mt-1" width="3rem" height="1.5rem"/>
                    </div>
                    <div class="d-column align-items-center">
                        <p-skeleton width="1rem" height="1.5rem"/>
                        <p-skeleton styleClass="mt-1" width="3rem" height="1.5rem"/>
                    </div>
                </div>
            </div>
    
            <div class="d-column justify-content-start mt-2 bold">
                <p-skeleton width="10rem" height="20px"/>
                <p-skeleton styleClass="my-1" width="5rem" height="20px"/>
            </div>
            <p-skeleton styleClass="mb-1" height="20px"/>
    
            <div class="d-flex justify-content-between">
                <p-skeleton styleClass="btn btn-primary p-1 mb-2 mt-1" width="10rem" height="26px"/>
            </div>
        </div>
    }
    @else {
        <div class="mt-3">
            <div class="d-row justify-content-between align-items-center">
                <div class="profile-photo">
                    <img [src]="profilePhoto" alt="Profile photo">
                </div>
                <div class="d-row justify-content-between align-items-center flex-1 mx-4">
                    <div class="d-column align-items-center">
                        <span class="bold">1</span>
                        <small>posts</small>
                    </div>
                    <div class="d-column align-items-center">
                        <span class="bold" [ngClass]="{'light-grey': !model?.followers}" >{{ model?.followers || 0 }}</span>
                        <small>followers</small>
                    </div>
                    <div class="d-column align-items-center">
                        <span class="bold" [ngClass]="{'light-grey': !model?.following}" >{{ model?.following || 0 }}</span>
                        <small>following</small>
                    </div>
                </div>
            </div>
    
            <div class="d-column justify-content-start mt-2 bold">
                <div>
                    {{ model?.fullName }}
                    <span class="ms-1" style="zoom: 90%">
                        <img [src]="model?.country?.flagUrl" alt="Country flag">
                    </span>
                </div>
                <div style="margin-top: -0.5rem;"><small class="light-grey">&commat;{{ model?.username }}</small></div>
            </div>
    
            <div class="mb-1" [innerHTML]="formatString(model?.biography)"></div>
    
            <div class="d-flex justify-content-between">
                @if(!isMyProfile()){
                    @if(isFollowed){
                        <button class="btn btn-border w-49 p-1 mb-2 mt-1" (click)="unfollow()">Unfollow</button>
                        <button class="btn btn-border w-49 p-1 mb-2 mt-1">Message</button>
                    }
                    @else {
                        <button class="btn btn-primary w-100 p-1 mb-2 mt-1" (click)="follow()">Follow</button>
                    }
                }
            </div>
        </div>
    }

</div>

<div class=" container-fluid d-row justify-content-between align-items-center shadow-style-bottom pb-2">
    <div class="icon" (click)="changeComponent(ComponentState.Gallery)">
        <span [class]="Icons.NG_GRID"></span>
    </div>
    <div class="icon" (click)="changeComponent(ComponentState.Threads)">
        <fa-icon [icon]="Icons.THREADS" style="font-size: 1.2rem;"/>
    </div>
    <div class="icon" style="width: 20px;" (click)="changeComponent(ComponentState.Videos)">
        <svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.5 7.25C2.08579 7.25 1.75 7.58579 1.75 8C1.75 8.41421 2.08579 8.75 2.5 8.75V7.25ZM22 7.25H2.5V8.75H22V7.25Z" fill="#1C274C"/>
            <path d="M10.5 2.5L7 8" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M17 2.5L13.5 8" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M15 14.5C15 13.8666 14.338 13.4395 13.014 12.5852C11.6719 11.7193 11.0008 11.2863 10.5004 11.6042C10 11.9221 10 12.7814 10 14.5C10 16.2186 10 17.0779 10.5004 17.3958C11.0008 17.7137 11.6719 17.2807 13.014 16.4148C14.338 15.5605 15 15.1334 15 14.5Z" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
    </div>
    <div class="icon" (click)="changeComponent(ComponentState.Tags)">
         <span [class]="Icons.NG_HASHTAG" style="font-size: 1.1rem;"></span>
    </div>
</div>

<div class="container-fluid">
    <div #container></div>
</div>


<app-mobile-navigation/>